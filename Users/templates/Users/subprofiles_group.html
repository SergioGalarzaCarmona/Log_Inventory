{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="{%static '/CSS/sideBarStyles.css'%}">
    <link rel="stylesheet" href="{%static '/CSS/subprofilesGroupStyles.css'%}">
    <title>Manejo de Grupos</title>
    <link rel="icon" href="{%static '/IMAGES/LogoMini.webp'%}" type="image/webp">
    <meta name="description" content="Subusers Groups Log Inventory">
    <meta name="author" content="Log Inventory">
    <meta name="robots" content="noindex, nofollow">
</head>
<body>
    {% include 'Users/sideBar.html' with path='manage_subusers' profile=profile type=type permissions=permissions%}
    <main>
        <div class="filter-bar"> 
            <div class="filter-bar__filter-container">
                <p>Grupos</p>
                <div class="filter-bar__logo-container">
                    <img src="{%static '/IMAGES/logo_transparente_blanco.webp'%}" alt="logo" class="logo">
                </div>
            </div>
        </div>
        {% for form in forms %}
        <div class="group-container">
            <form method="POST" class="group-image" enctype="multipart/form-data">
                <label for="id_image">
                    <img src="../../../media/{{form.instance.image}}" alt="Group Image">
                    <div class="image-overlay">
                        <label class="delete-image material-symbols-outlined" for="delete_image">delete</label>
                    </div>
                </label>
                {% csrf_token %} 
                <input type="number" value="{{form.instance.id}}" hidden name="id">
                {{image_form}}
                <input type="submit" id="id_submit" hidden>
            </form>
            <form method="POST" class="group-info"> 
        {%csrf_token%}
                <input type="number" value="{{form.instance.id}}" hidden name="id">
                <div class="group-name__container">
                    <label for="id_name">Nombre:</label>
                    {{form.name}}
                </div>
                <div class="group-permissions__container">
                    <label for="id_permissions">Tipo de grupo:</label>
                    {{form.permissions}}
                </div>
                
                <input type="submit" value="delete" class="delete-button material-symbols-outlined">
                <input type="submit" value="Guardar" class="save-button">
            </form>
            <div class="group-description__container">
                <label for="id_description">Descripci√≥n:</label>
                {{form.description}}
                <div>
                    {%if form.instance.pk == group.pk %}
                    {{form_post.errors.name}}
                    {%endif%}
                </div>
                <div>
                    {%if form.instance.pk == group.pk %}
                    {{form_post.errors.permissions}}
                    {%endif%}
                </div>
                <div>
                    {%if form.instance.pk == group.pk %}
                    {{form_post.errors.description}}
                    {%endif%}
                </div>
                <div>
                    {%if form.instance.pk == group.pk %}
                    <ul class="errorlist">
                        <li>{{message}}</li>
                    </ul>
                    {%endif%}
                </div>
            </div>
            <form method="POST">
                {% csrf_token %}
                <input type="number" value="{{form.instance.id}}" hidden name="id">
                <input type="checkbox" name="delete_image" checked id="id_delete_checkbox" hidden>
                <input type="submit" id="delete_image" value="submit" hidden>
            </form>
        </div>
        {% endfor %}
    </main>
    <script src="{%static '/SCRIPTS/profileScript.js'%}"></script>
</body>
</html>