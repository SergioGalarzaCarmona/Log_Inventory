{%load static%}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="{%static '/CSS/profileStyles.css'%}">
    <title>Perfil</title>
    <link rel="icon" href="{%static '/IMAGES/LogoMini.webp'%}" type="image/webp">
    <meta name="description" content="Configuración usuario Log Inventory">
    <meta name="author" content="Log Inventory">
    <meta name="robots" content="noindex, nofollow">
</head>
<body>
    <aside class="sidebar">
        <form class="sidebar__form">
            <input type="checkbox" id="open-menu">
            <label class="material-symbols-outlined close-menu" for="open-menu">chevron_left</label>
            <label class="material-symbols-outlined open-menu" for="open-menu">chevron_right</label>
        </form>
        <nav class="sidebar__nav">
            <ul>
                <li class="sidebar__item">
                    <a href="{% url 'main' %}" class="sidebar__item-link">
                        <span class="material-symbols-outlined">view_object_track</span>
                        <p>Objetos</p>
                    </a>
                </li>
                <li class="sidebar__item">
                    <a href="#" class="sidebar__item-link">
                        <span class="material-symbols-outlined">add</span>
                        <p>Crear</p>
                    </a>
                </li>
                <li class="sidebar__item">
                    <a href="#" class="sidebar__item-link">
                        <span class="material-symbols-outlined">partner_exchange</span>
                        <p>Prestamos</p>
                    </a>
                </li>
                <li class="sidebar__item">
                    <a href="#" class="sidebar__item-link">
                        <span class="material-symbols-outlined">event_note</span>
                        <p>Transacciones</p>
                    </a>
                </li>
                <li class="sidebar__item">
                    <a href="{% url 'manage_subusers' %}" class="sidebar__item-link">
                        <span class="material-symbols-outlined">groups</span>
                        <p>Usuarios</p>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="sidebar__profile">
            <ul>
                <li class="sidebar__item">
                    <a href="{% url 'profile' user.username %}" class="item--profile sidebar__item-link">
                        <img src="../../../media/{{user.profile.image}}" alt="profile-img">
                        <span id="username"  class="profile-option">{{user.username}}</span>
                    </a>
                </li>
                <li class="sidebar__item">
                    <a href="{% url 'logout' %}" class="sidebar__item-link">
                        <span class="material-symbols-outlined">Logout</span>
                        <p>Logout</p>
                    </a>   
                </li>
            </ul>
        </div>
    </aside>
    <main>
        <div class="filter-bar"> 
            <div class="filter-bar__filter-container">
                <div class="name">{{profile.user.username}}</div>
                <div class="filter-bar__logo-container">
                    <img src="{%static '/IMAGES/logo_transparente_blanco.webp'%}" alt="logo" class="logo">
                </div>
            </div>
        </div>
        <div class="profile-container">
            <div class="profile-img-container">
                <label for="id_image">
                    <div class="img-overlay">
                        <button id = 'id_delete_button'>
                            <span class="material-symbols-outlined">delete</span>
                        </button>
                        <form method="POST">
                            {% csrf_token %}
                            <input type="checkbox" name="delete_image" id="id_delete_checkbox" hidden>
                            <input type="submit" id="delete_image" value="submit" hidden>
                        </form>
                    </div>
                    <img src="../../../media/{{profile.image}}" alt="profile-img" class="profile-img">
                </label>
                <form method="POST" enctype="multipart/form-data" class="image_form">
                    {% csrf_token %}
                    {{image_form}}
                    <input type="submit" id='id_submit' value="Cambiar imagen">
                </form>
            </div>
            <form method="POST">
                {% csrf_token %}
                <div>
                    <p>
                        {{message}}
                    </p>
                </div>
                <div>
                </div>
                <div>
                    <label for="id_username">Nombre de Usuario:</label>
                    {{form_post.errors.username}}
                    {{form.username}}
                </div>
                <div>
                    <label for="id_email">Correo Electrónico:</label>
                    {{form_post.errors.email}}
                    {{form.email}}
                </div>
                <div class="modify-password">
                    <label for="password_id">Contraseña</label>
                    {{form_post.errors.password}}
                    <div>
                        <input type='password' name='password_support' id="password_id_support"  placeholder='Password' disabled value='password'>
                        <a title="Cambiar Contraseña" href="{% url 'change_password' %}"><span class="material-symbols-outlined">edit</span></a>
                    </div>
                </div>
                <input type="checkbox" value="Actualizar">
                <button id="open-dialog">Cambiar Información</button>
                <dialog id="modify-confirmation">
                    <div>
                        <label for="id_password">Ingresar Contraseña:</label>
                        {{form.password}}
                    </div> 
                    <div>
                        <input type="submit" value="Actualizar">
                    </div>
                    <button class="material-symbols-outlined" id="close-dialog">Close</button>
                </dialog>
            </form>
        </div>
    </main>
    <script src="{%static '/SCRIPTS/sidebarScript.js'%}"></script>
    <script src="{%static '/SCRIPTS/profileScript.js'%}"></script>
</body>
</html>