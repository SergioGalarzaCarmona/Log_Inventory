{%load static%}
<!DOCTYPE html>
<html lang="es"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="{%static '/CSS/sideBarStyles.css'%}">
    <link rel="stylesheet" href="{%static '/CSS/Objects/mainStyles.css'%}">
    <title>Work space - Log Inventory</title>
    <link rel="icon" href="{%static '/IMAGES/LogoMini.webp'%}" type="image/webp">
    <meta name="description" content="Work space Log Inventory">
    <meta name="author" content="Log Inventory">
    <meta name="robots" content="noindex, nofollow"> 
</head>
<body>
    {% include 'sideBar.html' with path='main' profile=profile type=type permissions=permissions active_objects="active"%}
    <main> 
        <div class="filter-bar container"> 
            <div class="filter-bar__filter-container row">
                <input type="submit" value="sort" class="filter-bar__a-z material-symbols-outlined col-md-1 col-0">
                <input type="submit" value="sort" class="filter-bar__z-a material-symbols-outlined col-md-1 col-0">
                <input type="submit" value="all_inbox" class="filter-bar__type material-symbols-outlined col-md-1 col-3" onclick="window.location.href='/object_groups';">
                <div class="filter-bar__name col-md-4 col-8">
                    <input type="text" placeholder="Buscar objeto por nombre..." id="search-input">
                    <input value="search" type="submit" class="material-symbols-outlined">
                </div>
                <div class="filter-bar__logo-container col-md-5 col-0">
                    <img src="{%static '/IMAGES/logo_transparente_blanco.webp'%}" alt="logo" class="logo">
                </div>
            </div>
        </div>
        <div class="forms-container">
            <nav>
                <label for="create-object" class="material-symbols-outlined close-formObject hidden">arrow_back</label>
                <label for="create-group" class="material-symbols-outlined close-formGroup hidden">arrow_back</label>
            </nav>
            <input type="checkbox" {{checked}} id="create-object">
            <form class="create-object" id='form-object' enctype="multipart/form-data" method="POST">
                {% csrf_token %}    
                {{object_form}}
                <input type="submit" value="Crear Objeto" id="create-button">
            </form>
            <input type="checkbox" {{checked_group}} id="create-group">
            <form class="create-group" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{object_group_form}}
                <input type="submit" value="Crear Grupo">
            </form>
            <div id="createGroupModal" class="modal-overlay" style="display: none;">
                <div class="modal-content">
                    <h3>Deseas crear un grupo?</h3>
                    <p>Para crear un objeto necesitas primero un grupo de objetos.</p>
                    <div class="modal-buttons">
                        <button id="cancelCreate" class="btn-cancel">No</button>
                        <button id="confirmCreate" class="btn-confirm">Si</button>
                    </div>
                </div>
            </div>
        </div>  
         

        <div class="objects-area">
            {% for object in objects %}
                <div class="object-card" onclick="window.location.href='{{object.id}}'">
                    <div class="overlay"></div>
                    <div class="object-card__image-container">
                        <img src="{{ object.image.url }}" alt="Imagen del objeto {{ object.name }}">
                    </div>
                    <div class="object-card__info-container">
                        <h3 class="object-card__name">{{ object.name }}</h3>
                        <div class="object-card__info">
                            <p class="object-card__group">Grupo: <strong>{{ object.group.name }}</strong></p>
                            <p class="object-card__quantity">Cantidad: <strong>{{ object.stock }}</strong></p>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p class="no-objects">No hay objectos todav√≠a</p>
            {% endfor %}
        </div>
        {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                    <div class="message-{{message.tags}}">
                        <div class="message-text">
                            {{ message }}
                        </div>
                        <div class="message-close-button" id="message-close-button" role="button" aria-label="Cerrar">
                            <span class="material-symbols-outlined message-close-button">Close</span>
                        </div>
                      </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </main>
    <script src="{%static '/SCRIPTS/sidebarScript.js'%}"></script>
    <script src="{% static '/SCRIPTS/mainScript.js' %}"></script>
</body>
</html>